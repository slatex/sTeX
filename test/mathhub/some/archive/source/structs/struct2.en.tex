\def\mathhub{../../..}
\documentclass[debug=all]{stex}
\libinput{preamble}

\begin{document}

\noindent Document \printdocument

\begin{smodule}{struct2}
  \importmodule{structs?struct1}

  \begin{extstructure}{testsb}{foostruct}
    \symdef{unit}{e}
  \end{extstructure}

  $\testsb!$

\end{smodule}

\begin{smodule}{struct3}
  \importmodule{struct2}

  \begin{extstructure*}{testsb}
    \symdef{div}[args=2,def=narf]{#1 \maincomp/ #2}
  \end{extstructure*}

  $\testsb![unit,div]$ and $\testsb{S}{div}ab$

  $\testsb{S}{op}{a,b,c}$

\end{smodule}

\end{document}
